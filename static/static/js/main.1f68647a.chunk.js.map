{"version":3,"sources":["pages/config.js","pages/live-data.js","pages/clients.js","utils/call-api.js","pages/quakes.js","pages/users.js","App.js","reportWebVitals.js","index.js"],"names":["useStyles","makeStyles","theme","root","display","appBar","zIndex","drawer","title","flexGrow","width","flexShrink","drawerPaper","drawerContainer","overflow","content","padding","spacing","Config","props","console","log","React","useState","config","setConfig","timestamp","setTimestamp","modifiedKeys","setModifiedKeys","callAPI","window","useEffect","a","success","json","getUser","setActiveTab","Fade","in","Typography","variant","Date","toTimeString","Button","onClick","JSON","stringify","color","style","marginBlock","startIcon","disabled","user","permissions","Grid","container","item","xs","Paper","height","marginBottom","FormControlLabel","control","Switch","checked","recieveMode","onChange","event","key","value","target","name","label","marginTop","FormControl","component","FormGroup","TextField","required","proxyServerIP","inputProps","textAlign","prev","labelPlacement","proxyServerPort","parseInt","serverPort","threshold","detrendTime","FormLabel","notificationTitle","marginLeft","notificationBody","notificationImage","live","LiveData","EHZ","ENE","ENN","ENZ","hundredthData","setHundredthData","average","offset","quarterlyData","setQuarterlyData","timeDifferences","setTimeDifferences","latency","setLatency","shaking","setShaking","setDetrendTime","useMeasure","sixRef","sixMeasurements","eightRef","eightMeasurements","lastMessage","socket","io","location","origin","extraHeaders","Authorization","token","emit","on","msg","ReactDOM","unstable_batchedUpdates","last99","slice","unshift","now","newRawData","channel","filter","x","time","push","Object","keys","data","i","off","disconnect","percentRecieved","length","Math","max","min","maxTime","map","paddingBottom","paddingLeft","alignItems","flexWrap","round","toString","ref","strokeWidth","y","orientation","items","Clients","clients","setClients","firebaseSubscriptions","setFirebaseSubscriptions","parser","UAParser","result","newClients","socketio","setUA","userAgent","getResult","UA","sid","firebase","getClients","client","sm","lg","os","fontSize","browser","major","version","makeAlert","platform","toQueryString","params","entries","kv","encodeURIComponent","join","endpoint","method","successMessage","fetch","headers","response","status","startsWith","makeError","error","localStorage","quakeUser","reload","permissionsResponse","setUser","Quake","history","useHistory","quakeID","useParams","quakes","quake","setQuake","getQuake","timeStart","toDateString","toLocaleTimeString","timeEnd","strength","QuakesList","page","setPage","rows","setRows","loading","setLoading","totalRows","setTotalRows","setQuakes","path","useRouteMatch","columns","field","headerName","flex","renderCell","Link","to","getQuakes","per_page","previousQuakes","parse","list","id","total","active","newRows","row","date","view","pagination","pageSize","rowCount","paginationMode","onPageChange","Quakes","margin","selected","backgroundColor","CreateUser","email","setEmail","users","setPermissions","setUsers","setSelectedUser","square","paddingRight","paddingTop","Select","info","MenuItem","createUser","User","permissionsChange","setPermissionsChange","undefined","updatePermissions","logs","sort","b","c","toLocaleString","Users","classes","selectedUser","className","List","disablePadding","ListItem","button","boxShadow","ListItemIcon","Avatar","src","picture","ListItemText","primary","secondary","contentRoot","popover","flexDirection","avatar","userInfo","userName","fontWeight","userEmail","bar","justifyContent","buttonSignout","borderRadius","textTransform","Admin","activeTab","Drawer","paper","Toolbar","AppBar","anchorEl","setAnchorEl","gResponse","credential","newUser","onGoogleSignIn","position","alt","currentTarget","cursor","data-client_id","data-context","data-ux_mode","data-callback","data-auto_select","data-close_on_tap_outside","class","data-type","data-shape","data-theme","data-text","data-size","data-logo_alignment","Popover","open","onClose","anchorOrigin","vertical","horizontal","transformOrigin","Divider","size","App","exception","expiry","setError","severity","setSeverity","setOpen","refreshPermissions","Snackbar","autoHideDuration","Alert","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1f68647a.chunk.js","sourcesContent":["import Button from \"@material-ui/core/Button\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\nimport FormControl from \"@material-ui/core/FormControl\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport FormGroup from \"@material-ui/core/FormGroup\";\r\nimport FormLabel from \"@material-ui/core/FormLabel\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Switch from \"@material-ui/core/Switch\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport React from \"react\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerContainer: {\r\n    overflow: \"auto\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function Config(props) {\r\n  const classes = useStyles();\r\n  console.log(\"render overview\");\r\n  const [config, setConfig] = React.useState({});\r\n  const [timestamp, setTimestamp] = React.useState(0);\r\n  const [modifiedKeys, setModifiedKeys] = React.useState([]);\r\n\r\n  const callAPI = window.callAPI;\r\n\r\n  React.useEffect(() => {\r\n    async function getUser() {\r\n      const { success, json } = await callAPI(\"config\", \"GET\");\r\n      if (success) {\r\n        setConfig(json.config);\r\n        setTimestamp(json.timestamp);\r\n      }\r\n    }\r\n    getUser();\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    props.setActiveTab(4);\r\n  }, []);\r\n\r\n  function updateConfig(key, value) {\r\n    setConfig({ ...config, [key]: value });\r\n    if (!key in modifiedKeys) setModifiedKeys([...modifiedKeys, key]);\r\n  }\r\n\r\n  async function setServerConfig() {\r\n    var newConfig = {};\r\n    for (var key of modifiedKeys) {\r\n      newConfig[key] = config[key];\r\n    }\r\n\r\n    if (Object.keys(newConfig).length === 0) return;\r\n    const { success, json } = await callAPI(\"config\", \"POST\", {\r\n      config: JSON.stringify(newConfig),\r\n    });\r\n    if (success) {\r\n      setConfig(json.config);\r\n      setTimestamp(json.timestamp);\r\n      setModifiedKeys([]);\r\n    }\r\n  }\r\n\r\n  console.log(\"config\", config);\r\n\r\n  return (\r\n    <Fade in>\r\n      <div>\r\n        <Typography variant=\"body1\">\r\n          Last updated: {new Date(timestamp).toTimeString()}\r\n        </Typography>\r\n        <Button\r\n          onClick={() => {\r\n            window.callAPI(\r\n              \"config\",\r\n              \"POST\",\r\n              {\r\n                config: JSON.stringify(config),\r\n              },\r\n              \"Config saved\"\r\n            );\r\n          }}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          style={{ marginBlock: 5 }}\r\n          startIcon={<SaveIcon />}\r\n          disabled={window.user.permissions.config !== 0}\r\n        >\r\n          save config\r\n        </Button>\r\n        <Typography variant=\"body1\" style={{ marginBlock: 5 }}>\r\n          Note: Updates may take up to 10 seconds to come into effect.\r\n        </Typography>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={6}>\r\n            <Paper style={{ padding: 20, height: \"100%\" }}>\r\n              <Typography variant=\"h5\">Quakes and Datacast:</Typography>\r\n              <div style={{ marginBlock: 20, height: \"auto\" }}>\r\n                <Typography variant=\"h6\" style={{ marginBottom: \"-5px\" }}>\r\n                  Datacast:\r\n                </Typography>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Switch\r\n                      checked={config.recieveMode === \"client\"}\r\n                      onChange={(event) =>\r\n                        updateConfig(\r\n                          \"recieveMode\",\r\n                          event.target.checked ? \"client\" : \"server\"\r\n                        )\r\n                      }\r\n                      name=\"checkedB\"\r\n                      color=\"primary\"\r\n                    />\r\n                  }\r\n                  //   labelPlacement=\"start\"\r\n                  label=\"Use proxy server\"\r\n                  style={{ width: \"100%\", marginTop: 5 }}\r\n                />\r\n                <FormControl component=\"fieldset\">\r\n                  <FormGroup>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.proxyServerIP}\r\n                          //   style={{ marginLeft: 5 }}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          style={{ width: \"auto\" }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              proxyServerIP: event.target.value,\r\n                            }))\r\n                          }\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Proxy server IP:\"\r\n                    />\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.proxyServerPort}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              proxyServerPort: parseInt(event.target.value),\r\n                            }))\r\n                          }\r\n                          //   style={{ marginLeft: 5 }}\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Proxy server port:\"\r\n                    />\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.serverPort}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              serverPort: parseInt(event.target.value),\r\n                            }))\r\n                          }\r\n                          //   style={{ marginLeft: 5 }}\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Server port:\"\r\n                    />\r\n                  </FormGroup>\r\n                </FormControl>\r\n              </div>\r\n              <div style={{ marginBlock: 20, height: \"auto\" }}>\r\n                <Typography variant=\"h6\" style={{ marginBottom: \"5px\" }}>\r\n                  Quakes:\r\n                </Typography>\r\n\r\n                <FormControl component=\"fieldset\">\r\n                  <FormGroup>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.threshold}\r\n                          //   style={{ marginLeft: 5 }}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          style={{ width: \"auto\" }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              threshold: parseInt(event.target.value),\r\n                            }))\r\n                          }\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Threshold:\"\r\n                    />\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.detrendTime}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          //   style={{ marginLeft: 5 }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              detrendTime: parseInt(event.target.value),\r\n                            }))\r\n                          }\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Detrend time:\"\r\n                    />\r\n                  </FormGroup>\r\n                </FormControl>\r\n              </div>\r\n            </Paper>\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Paper style={{ padding: 20, height: \"100%\" }}>\r\n              <Typography variant=\"h5\">Alerts:</Typography>\r\n              <div style={{ marginBlock: 20, height: \"auto\" }}>\r\n                <FormControl component=\"fieldset\">\r\n                  <FormLabel component=\"legend\">Notification details</FormLabel>\r\n                  <FormGroup>\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.notificationTitle}\r\n                          //   style={{ marginLeft: 5 }}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          style={{ marginLeft: 10, width: 300 }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              notificationTitle: event.target.value,\r\n                            }))\r\n                          }\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Notification title:\"\r\n                    />\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.notificationBody}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          style={{ marginLeft: 10, width: 300 }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              notificationBody: event.target.value,\r\n                            }))\r\n                          }\r\n                          //   style={{ marginLeft: 5 }}\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Notification body:\"\r\n                    />\r\n                    <FormControlLabel\r\n                      control={\r\n                        <TextField\r\n                          required\r\n                          value={config.notificationImage}\r\n                          inputProps={{ style: { textAlign: \"right\" } }}\r\n                          style={{ marginLeft: 10, width: 300 }}\r\n                          onChange={(event) =>\r\n                            setConfig((prev) => ({\r\n                              ...prev,\r\n                              notificationImage: event.target.value,\r\n                            }))\r\n                          }\r\n                        />\r\n                      }\r\n                      labelPlacement=\"start\"\r\n                      label=\"Notification image:\"\r\n                    />\r\n                  </FormGroup>\r\n                </FormControl>\r\n                <Button\r\n                  onClick={() => {\r\n                    window.callAPI(\"alert\", \"GET\", {}, \"Alert sent\");\r\n                  }}\r\n                  color=\"primary\"\r\n                  variant=\"outlined\"\r\n                  style={{ marginTop: 20 }}\r\n                  disabled={window.user.permissions.live !== 0}\r\n                  startIcon={<SendIcon />}\r\n                >\r\n                  Test Alert Notification\r\n                </Button>\r\n              </div>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </Fade>\r\n  );\r\n}\r\n","import Fade from \"@material-ui/core/Fade\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport SignalCellular3BarIcon from \"@material-ui/icons/SignalCellular3Bar\";\r\nimport SignalCellular4BarIcon from \"@material-ui/icons/SignalCellular4Bar\";\r\nimport SignalCellularConnectedNoInternet0BarIcon from \"@material-ui/icons/SignalCellularConnectedNoInternet0Bar\";\r\nimport SignalCellularConnectedNoInternet1BarIcon from \"@material-ui/icons/SignalCellularConnectedNoInternet1Bar\";\r\nimport SignalCellularConnectedNoInternet2BarIcon from \"@material-ui/icons/SignalCellularConnectedNoInternet2Bar\";\r\nimport TimelineIcon from \"@material-ui/icons/Timeline\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { useMeasure } from \"react-use\";\r\nimport {\r\n  DiscreteColorLegend,\r\n  HorizontalGridLines,\r\n  LineSeriesCanvas,\r\n  VerticalGridLines,\r\n  XAxis,\r\n  XYPlot,\r\n  YAxis,\r\n} from \"react-vis\";\r\nimport \"../App.css\";\r\nimport FlashOnIcon from \"@material-ui/icons/FlashOn\";\r\nimport { io } from \"socket.io-client\";\r\nimport ReplayIcon from \"@material-ui/icons/Replay\";\r\n\r\nexport default function LiveData(props) {\r\n  const [hundredthData, setHundredthData] = React.useState({\r\n    EHZ: [],\r\n    ENE: [],\r\n    ENN: [],\r\n    ENZ: [],\r\n  });\r\n  const [quarterlyData, setQuarterlyData] = React.useState({\r\n    average: [],\r\n    offset: [],\r\n    threshold: [],\r\n  });\r\n  const [timeDifferences, setTimeDifferences] = React.useState([]);\r\n  const [latency, setLatency] = React.useState(0);\r\n  const [shaking, setShaking] = React.useState(false);\r\n  const [detrendTime, setDetrendTime] = React.useState(2000);\r\n  const [sixRef, sixMeasurements] = useMeasure();\r\n  const [eightRef, eightMeasurements] = useMeasure();\r\n\r\n  React.useEffect(() => {\r\n    props.setActiveTab(3);\r\n    window.lastMessage = 0;\r\n    var socket = io(window.location.origin, {\r\n      extraHeaders: {\r\n        Authorization: window.user.token,\r\n      },\r\n    });\r\n    socket.emit(\"listen raw\");\r\n    socket.on(\"raw data\", (msg) => {\r\n      ReactDOM.unstable_batchedUpdates(() => {\r\n        if (msg.timestamp - window.lastMessage < 100000) {\r\n          setTimeDifferences((prev) => {\r\n            var last99 = prev.slice(0, 79);\r\n            last99.unshift(msg.timestamp);\r\n            return last99;\r\n          });\r\n        }\r\n        setLatency(Date.now() - msg.timestamp);\r\n        setDetrendTime(msg.detrendTime);\r\n        setShaking(msg.shaking);\r\n        setQuarterlyData((prev) => {\r\n          var newRawData = {};\r\n          for (var channel of [\"average\", \"offset\", \"threshold\"]) {\r\n            newRawData[channel] = prev[channel].filter(\r\n              (x) => x.time > msg.timestamp - 100000\r\n            );\r\n            newRawData[channel].push({\r\n              time: msg.timestamp,\r\n              value:\r\n                (channel === \"threshold\" ? msg.threshold : msg[channel]) / 1000,\r\n            });\r\n          }\r\n          return newRawData;\r\n        });\r\n        setHundredthData((prev) => {\r\n          var newRawData = {};\r\n          var channel;\r\n          for (channel of Object.keys(msg.data)) {\r\n            newRawData[channel] = prev[channel].filter(\r\n              (x) => x.time > msg.timestamp - 20000\r\n            );\r\n            var i;\r\n            for (i in msg.data[channel]) {\r\n              newRawData[channel].push({\r\n                time: msg.timestamp + i * 10,\r\n                value: msg.data[channel][i] / 1000,\r\n              });\r\n            }\r\n          }\r\n          return newRawData;\r\n        });\r\n      });\r\n      window.lastMessage = msg.timestamp;\r\n    });\r\n\r\n    return () => {\r\n      socket.emit(\"disconnect raw\");\r\n      socket.off(\"raw data\");\r\n      socket.disconnect();\r\n    };\r\n  }, [props]);\r\n\r\n  // var goodTimes = timeDifferences.filter(x => x === 250).length\r\n  // var badTimes = timeDifferences.length - goodTimes\r\n\r\n  var percentRecieved =\r\n    timeDifferences.length /\r\n    ((Math.max(...timeDifferences) - Math.min(...timeDifferences)) / 250 + 1);\r\n\r\n  window.hundredthData = hundredthData;\r\n  window.quarterlyData = quarterlyData;\r\n\r\n  var maxTime = {\r\n    EHZ: Math.max(...hundredthData.EHZ.map((x) => x.time)),\r\n    ENE: Math.max(...hundredthData.ENE.map((x) => x.time)),\r\n    ENN: Math.max(...hundredthData.ENN.map((x) => x.time)),\r\n    ENZ: Math.max(...hundredthData.ENZ.map((x) => x.time)),\r\n    average: Math.max(...quarterlyData.average.map((x) => x.time)),\r\n    offset: Math.max(...quarterlyData.offset.map((x) => x.time)),\r\n    threshold: Math.max(...quarterlyData.threshold.map((x) => x.time)),\r\n  };\r\n\r\n  return (\r\n    <Fade in>\r\n      <div>\r\n        <Grid container spacing={3} style={{ paddingBottom: \"-20px\" }}>\r\n          <Grid item xs={4}>\r\n            <Typography variant=\"h6\">Connection:</Typography>\r\n            <div style={{ paddingLeft: \"10px\" }}>\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  flexWrap: \"wrap\",\r\n                }}\r\n              >\r\n                {percentRecieved === 0 ? (\r\n                  <SignalCellularConnectedNoInternet0BarIcon />\r\n                ) : percentRecieved < 0.5 ? (\r\n                  <SignalCellularConnectedNoInternet1BarIcon />\r\n                ) : percentRecieved < 0.8 ? (\r\n                  <SignalCellularConnectedNoInternet2BarIcon />\r\n                ) : percentRecieved < 0.9 ? (\r\n                  <SignalCellular3BarIcon />\r\n                ) : (\r\n                  <SignalCellular4BarIcon />\r\n                )}\r\n                <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                  {percentRecieved === 0\r\n                    ? \"Connecting...\"\r\n                    : Math.round(percentRecieved * 100).toString() +\r\n                      \"% of packets recieved\"}\r\n                </Typography>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  flexWrap: \"wrap\",\r\n                }}\r\n              >\r\n                <HourglassEmptyIcon />\r\n                <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                  Latency: {Math.round(latency / 100) / 10} second\r\n                  {Math.round(latency / 100) / 10 === 1 ? \"\" : \"s\"}\r\n                </Typography>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  flexWrap: \"wrap\",\r\n                }}\r\n              >\r\n                <FlashOnIcon />\r\n                <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                  Threshold met: {shaking.toString()}\r\n                </Typography>\r\n              </div>\r\n\r\n              <div\r\n                style={{\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  flexWrap: \"wrap\",\r\n                }}\r\n              >\r\n                <TimelineIcon />\r\n                <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                  EHZ average / offset:{\" \"}\r\n                  {quarterlyData.offset.length !== 0 &&\r\n                    Math.round(\r\n                      quarterlyData.offset[quarterlyData.offset.length - 1]\r\n                        .value\r\n                    )}{\" \"}\r\n                  M EHZ / 10 ms\r\n                </Typography>\r\n              </div>\r\n\r\n              <Button\r\n                onClick={() => {\r\n                  window.callAPI(\"offset\", \"DELETE\");\r\n                }}\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                style={{ marginTop: 5 }}\r\n                disabled={window.user.permissions.live !== 0}\r\n                startIcon={<ReplayIcon />}\r\n              >\r\n                Reset offset\r\n              </Button>\r\n              <Typography style={{ marginTop: \"10px\" }} variant=\"body1\">\r\n                All y-axis represent strength in thousand counts per 10\r\n                milliseconds\r\n              </Typography>\r\n            </div>\r\n          </Grid>\r\n\r\n          <Grid item xs={8}>\r\n            <Paper\r\n              ref={eightRef}\r\n              style={{\r\n                paddingLeft: \"10px\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                flexWrap: \"wrap\",\r\n              }}\r\n            >\r\n              <Typography variant=\"h6\" style={{ marginLeft: \"40%\" }}>\r\n                Detrended EHZ\r\n              </Typography>\r\n              <XYPlot\r\n                width={eightMeasurements.width - 210}\r\n                height={190}\r\n                // style={{ width: \"500px\", height: \"200px\" }}\r\n              >\r\n                <VerticalGridLines />\r\n                <HorizontalGridLines />\r\n                <XAxis title=\"Time (seconds)\" />\r\n                <YAxis />\r\n                <LineSeriesCanvas\r\n                  strokeWidth={1}\r\n                  color=\"#0D676C\"\r\n                  data={quarterlyData.average.map((i) => ({\r\n                    x: (maxTime.average - i.time) / 1000,\r\n                    y: i.value,\r\n                  }))}\r\n                />\r\n                {/* <LineSeriesCanvas strokeWidth={1} color=\"#B52F93\" data={quarterlyData.offset.map(i => ({ x: (maxTime.offset - i.time) / 1000, y: i.value }))} /> */}\r\n                <LineSeriesCanvas\r\n                  strokeWidth={1}\r\n                  color=\"#000000\"\r\n                  data={quarterlyData.threshold.map((i) => ({\r\n                    x: (maxTime.threshold - i.time) / 1000,\r\n                    y: i.value,\r\n                  }))}\r\n                />\r\n              </XYPlot>\r\n              <DiscreteColorLegend\r\n                orientation=\"vertical\"\r\n                width={200}\r\n                items={[\r\n                  { title: \"Threshold for quake\", color: \"#000000\" },\r\n                  {\r\n                    title: \"Average of detrended EHZ over 0.25s\",\r\n                    color: \"#0D676C\",\r\n                  },\r\n                ]}\r\n              />\r\n            </Paper>\r\n          </Grid>\r\n\r\n          {Object.keys(hundredthData).map((channel) => (\r\n            <Grid item xs={6}>\r\n              <Paper style={{ paddingLeft: \"10px\" }}>\r\n                <Typography variant=\"h6\" style={{ marginLeft: \"40%\" }}>\r\n                  Channel {channel}\r\n                </Typography>\r\n                <XYPlot width={sixMeasurements.width - 20} height={190}>\r\n                  <VerticalGridLines />\r\n                  <HorizontalGridLines />\r\n                  <XAxis title=\"Time (seconds)\" />\r\n                  <YAxis />\r\n                  <LineSeriesCanvas\r\n                    strokeWidth={1}\r\n                    data={hundredthData[channel].map((i) => ({\r\n                      x: (maxTime[channel] - i.time) / 1000,\r\n                      y: i.value,\r\n                    }))}\r\n                  />\r\n                </XYPlot>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n          <Grid item xs={6}>\r\n            <div ref={sixRef} />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </Fade>\r\n  );\r\n}\r\n","import AppBar from \"@material-ui/core/AppBar\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport Drawer from \"@material-ui/core/Drawer\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport MenuIcon from \"@material-ui/icons/Menu\";\r\nimport Alert from \"@material-ui/lab/Alert\";\r\nimport React from \"react\";\r\nimport GoogleLogin from \"react-google-login\";\r\nimport ShowChartIcon from \"@material-ui/icons/ShowChart\";\r\nimport PieChartIcon from \"@material-ui/icons/PieChart\";\r\nimport PeopleIcon from \"@material-ui/icons/People\";\r\nimport SettingsIcon from \"@material-ui/icons/Settings\";\r\nimport PublicIcon from \"@material-ui/icons/Public\";\r\nimport AppleIcon from \"@material-ui/icons/Apple\";\r\nimport AndroidIcon from \"@material-ui/icons/Android\";\r\nimport UAParser from \"ua-parser-js\";\r\nimport { io } from \"socket.io-client\";\r\n\r\nimport DesktopWindowsIcon from \"@material-ui/icons/DesktopWindows\";\r\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerContainer: {\r\n    overflow: \"auto\",\r\n  },\r\n  content: {\r\n    flexGrow: 1,\r\n    padding: theme.spacing(3),\r\n  },\r\n}));\r\n\r\nexport default function Clients(props) {\r\n  const classes = useStyles();\r\n  console.log(\"render overview\");\r\n\r\n  const [clients, setClients] = React.useState([]);\r\n  const [firebaseSubscriptions, setFirebaseSubscriptions] = React.useState([]);\r\n  const [timestamp, setTimestamp] = React.useState(0);\r\n  const [socket, setSocket] = React.useState(() =>\r\n    io(window.location.origin, {\r\n      extraHeaders: {\r\n        Authorization: window.user.token,\r\n      },\r\n    })\r\n  );\r\n\r\n  const callAPI = window.callAPI;\r\n\r\n  React.useEffect(() => {\r\n    async function getClients() {\r\n      const { success, json } = await callAPI(\"clients\", \"GET\");\r\n      if (success) {\r\n        var parser = new UAParser();\r\n        var result = {};\r\n        var newClients = [];\r\n        var i;\r\n\r\n        for (i of Object.keys(json.socketio)) {\r\n          parser.setUA(json.socketio[i].userAgent);\r\n          result = parser.getResult();\r\n          newClients.push({ UA: result, user: json.socketio[i].user, sid: i });\r\n        }\r\n\r\n        setClients(newClients);\r\n\r\n        newClients = [];\r\n\r\n        for (i of json.firebase) {\r\n          parser.setUA(i.userAgent);\r\n          result = parser.getResult();\r\n          newClients.push({ UA: result, token: i.token });\r\n        }\r\n\r\n        setFirebaseSubscriptions(newClients);\r\n\r\n        setTimestamp(json.timestamp);\r\n\r\n        socket.emit(\"listen clients\");\r\n\r\n        socket.on(\"new client\", (msg) => {\r\n          console.log(\"new client\");\r\n          if (msg.sid) {\r\n            setClients((prev) => [\r\n              ...prev,\r\n              {\r\n                UA: UAParser(msg.userAgent),\r\n                user: msg.user,\r\n                sid: msg.sid,\r\n              },\r\n            ]);\r\n          } else {\r\n            setFirebaseSubscriptions((prev) => [\r\n              ...prev,\r\n              {\r\n                UA: UAParser(msg.userAgent),\r\n                token: msg.token,\r\n              },\r\n            ]);\r\n          }\r\n        });\r\n\r\n        socket.on(\"remove client\", (msg) => {\r\n          if (msg.sid) {\r\n            setClients((prev) => prev.filter((a) => a.sid !== msg.sid));\r\n          } else {\r\n            setFirebaseSubscriptions((prev) =>\r\n              prev.filter((a) => a.token !== msg.token)\r\n            );\r\n          }\r\n        });\r\n      }\r\n    }\r\n    getClients();\r\n\r\n    return () => {\r\n      socket.emit(\"disconnect clients\");\r\n      socket.off(\"new client\");\r\n      socket.off(\"remove client\");\r\n      socket.disconnect();\r\n    };\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    props.setActiveTab(0);\r\n  }, []);\r\n\r\n  console.log(clients);\r\n  return (\r\n    <Fade in>\r\n      <div>\r\n        <Typography variant=\"h4\" style={{ marginBlock: 20 }}>\r\n          Socket.io clients:\r\n        </Typography>\r\n        <Grid container spacing={2}>\r\n          {clients.map((client) => (\r\n            <Grid item xs={12} sm={6} lg={4}>\r\n              <Paper style={{ width: \"90%\", padding: \"16px\" }}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={6} sm={4}>\r\n                    {client.UA.os.name === \"Android\" ? (\r\n                      <AndroidIcon\r\n                        style={{ width: \"100%\", fontSize: \"100px\" }}\r\n                      />\r\n                    ) : client.UA.os.name === \"Mac OS\" ||\r\n                      client.UA.os.name === \"iOS\" ? (\r\n                      <AppleIcon style={{ width: \"100%\", fontSize: \"100px\" }} />\r\n                    ) : (\r\n                      <DesktopWindowsIcon\r\n                        style={{ width: \"100%\", fontSize: \"100px\" }}\r\n                      />\r\n                    )}\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={8}>\r\n                    <div>\r\n                      <Typography variant=\"h6\">\r\n                        {client.UA.browser.name} {client.UA.browser.major} on{\" \"}\r\n                        {client.UA.os.name} {client.UA.os.version}\r\n                      </Typography>\r\n                      <Typography variant=\"body1\">\r\n                        {client.user.name}\r\n                      </Typography>\r\n                      <Button\r\n                        onClick={() => {\r\n                          // window.callAPI(\r\n                          //   \"alert/socketio\",\r\n                          //   \"POST\",\r\n                          //   {\r\n                          //     sid: client.sid,\r\n                          //   },\r\n                          //   \"Alert sent\"\r\n                          // );\r\n                          socket.emit(\"alert\", client.sid, () =>\r\n                            window.makeAlert(\"Alert sent\", \"success\")\r\n                          );\r\n                        }}\r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        style={{ marginBlock: 5 }}\r\n                        disabled={window.user.permissions.config !== 0}\r\n                      >\r\n                        Send test alert\r\n                      </Button>\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        <Typography variant=\"h4\" style={{ marginBlock: 20 }}>\r\n          Firebase clients:\r\n        </Typography>\r\n        <Grid container spacing={2}>\r\n          {firebaseSubscriptions.map((client) => (\r\n            <Grid item xs={12} sm={6} lg={4}>\r\n              <Paper style={{ width: \"100%\", padding: \"16px\" }}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={6} sm={4}>\r\n                    {client.UA.os.platform === \"Android\" ? (\r\n                      <AndroidIcon\r\n                        style={{ width: \"100%\", fontSize: \"150px\" }}\r\n                      />\r\n                    ) : client.UA.os.platform === \"Mac OS\" ||\r\n                      client.UA.os.platform === \"iOS\" ? (\r\n                      <AppleIcon style={{ width: \"100%\", fontSize: \"150px\" }} />\r\n                    ) : (\r\n                      <DesktopWindowsIcon\r\n                        style={{ width: \"100%\", fontSize: \"150px\" }}\r\n                      />\r\n                    )}\r\n                  </Grid>\r\n                  <Grid item xs={6} sm={8}>\r\n                    <div>\r\n                      <Typography variant=\"h5\">\r\n                        {client.UA.browser.name} {client.UA.browser.major} on{\" \"}\r\n                        {client.UA.os.name} {client.UA.os.version}\r\n                      </Typography>\r\n                      <Button\r\n                        onClick={() => {\r\n                          window.callAPI(\r\n                            \"subscription\",\r\n                            \"DELETE\",\r\n                            {\r\n                              token: client.token,\r\n                            },\r\n                            \"Client unsubscribed\"\r\n                          );\r\n                        }}\r\n                        color=\"primary\"\r\n                        variant=\"outlined\"\r\n                        style={{ marginBlock: 5 }}\r\n                        disabled={window.user.permissions.config !== 0}\r\n                      >\r\n                        unsubscribe\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          window.callAPI(\r\n                            \"alert/firebase\",\r\n                            \"POST\",\r\n                            {\r\n                              token: client.token,\r\n                            },\r\n                            \"Alert sent\"\r\n                          );\r\n                        }}\r\n                        color=\"primary\"\r\n                        variant=\"contained\"\r\n                        style={{ marginBlock: 5 }}\r\n                        disabled={window.user.permissions.config !== 0}\r\n                      >\r\n                        Send test alert\r\n                      </Button>\r\n                    </div>\r\n                  </Grid>\r\n                </Grid>\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </div>\r\n    </Fade>\r\n  );\r\n}\r\n","const toQueryString = (params) =>\r\n  Object.entries(params)\r\n    .map((kv) => kv.map(encodeURIComponent).join(\"=\"))\r\n    .join(\"&\");\r\n\r\nexport default async function callAPI(\r\n  endpoint,\r\n  method,\r\n  params,\r\n  successMessage\r\n) {\r\n  console.log(\"API call:\", endpoint, method, params);\r\n\r\n  const response = await fetch(\r\n    \"/api/v1/\" + endpoint + (params ? \"?\" + toQueryString(params) : \"\"),\r\n    { headers: { Authorization: window.user.token }, method: method }\r\n  );\r\n\r\n  const status = response.status;\r\n  var success = status.toString().startsWith(\"2\");\r\n  var json = success && status !== 204 && (await response.json());\r\n\r\n  if (success) {\r\n    if (successMessage) {\r\n      window.makeAlert(successMessage, \"success\");\r\n    }\r\n  } else {\r\n    const makeError = (error) => window.makeAlert(error, \"error\");\r\n\r\n    switch (status) {\r\n      case 400:\r\n        makeError(\"Bad request. If this is an error, try contacting Ben\");\r\n        break;\r\n      case 401:\r\n        makeError(\"Invalid token, try signing in again\");\r\n        delete localStorage.quakeUser;\r\n        window.location.reload();\r\n        break;\r\n      case 403:\r\n        makeError(\r\n          \"Insufficient permissions, refreshing permissions now. If this is an error persists, try contacting Ben\"\r\n        );\r\n        var permissionsResponse = await callAPI(\"users/me\", \"GET\");\r\n        if (permissionsResponse.success) {\r\n          window.setUser((prev) => ({\r\n            ...prev,\r\n            permissions: permissionsResponse.json.permissions,\r\n          }));\r\n        }\r\n        break;\r\n      case 404:\r\n        makeError(\r\n          \"Resource not found. If this is an error, try contacting Ben\"\r\n        );\r\n        break;\r\n      case 405:\r\n        makeError(\"Invalid endpoint. If this is an error, try contacting Ben\");\r\n        break;\r\n      default:\r\n        makeError(\"Unknown error \" + status + \", try contacting Ben\");\r\n    }\r\n  }\r\n\r\n  return { status, success, json };\r\n}\r\n\r\nwindow.callAPI = callAPI;\r\n","import Button from \"@material-ui/core/Button\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { DataGrid } from \"@material-ui/data-grid\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport EventIcon from \"@material-ui/icons/Event\";\r\nimport HeightIcon from \"@material-ui/icons/Height\";\r\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\r\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\r\nimport React from \"react\";\r\nimport {\r\n  Link,\r\n  Route,\r\n  Switch,\r\n  useHistory,\r\n  useParams,\r\n  useRouteMatch,\r\n} from \"react-router-dom\";\r\nimport { useMeasure } from \"react-use\";\r\nimport {\r\n  HorizontalGridLines,\r\n  LineSeriesCanvas,\r\n  VerticalGridLines,\r\n  XAxis,\r\n  XYPlot,\r\n  YAxis,\r\n} from \"react-vis\";\r\nimport \"../App.css\";\r\nimport callAPI from \"../utils/call-api\";\r\n\r\nfunction Quake(props) {\r\n  let history = useHistory();\r\n  // const [rawData, setRawData] = React.useState({})\r\n  let { quakeID } = useParams();\r\n  const [quake, setQuake] = React.useState(props.quakes[quakeID]);\r\n  const [sixRef, sixMeasurements] = useMeasure();\r\n\r\n  console.log(\"render quake\");\r\n\r\n  React.useEffect(() => {\r\n    async function getQuake() {\r\n      const { success, json } = await callAPI(\"quakes/\" + quakeID, \"GET\");\r\n      if (success) {\r\n        setQuake(json);\r\n      }\r\n    }\r\n\r\n    if (!(quake && quake.data)) {\r\n      getQuake();\r\n    }\r\n    return;\r\n  }, [quake, quakeID]);\r\n\r\n  return (\r\n    <Fade in>\r\n      <div>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={6}>\r\n            <Typography variant=\"h6\">Details:</Typography>\r\n            {quake && (\r\n              <div style={{ paddingLeft: \"10px\" }}>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                  }}\r\n                >\r\n                  <EventIcon />\r\n                  <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                    {new Date(quake.timeStart).toDateString()}\r\n                  </Typography>\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                  }}\r\n                >\r\n                  <ScheduleIcon />\r\n                  <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                    {new Date(quake.timeStart).toLocaleTimeString()} -{\" \"}\r\n                    {new Date(quake.timeEnd).toLocaleTimeString()}\r\n                  </Typography>\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                  }}\r\n                >\r\n                  <HourglassEmptyIcon />\r\n                  <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                    {Math.round((quake.timeEnd - quake.timeStart) / 100) / 10}{\" \"}\r\n                    seconds\r\n                  </Typography>\r\n                </div>\r\n                <div\r\n                  style={{\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    flexWrap: \"wrap\",\r\n                  }}\r\n                >\r\n                  <HeightIcon />\r\n                  <Typography variant=\"body1\" style={{ marginLeft: \"10px\" }}>\r\n                    {Math.round(quake.strength / 100000) / 10} million EHZ\r\n                    counts per second\r\n                  </Typography>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </Grid>\r\n          <Grid item xs={6}>\r\n            <Typography variant=\"h6\">Actions:</Typography>\r\n            {quake && (\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                style={{ marginLeft: \"10px\" }}\r\n                startIcon={<DeleteIcon />}\r\n                onClick={async () => {\r\n                  const { success } = await callAPI(\r\n                    \"quakes/\" + quakeID,\r\n                    \"DELETE\",\r\n                    {},\r\n                    \"Quake deleted\"\r\n                  );\r\n                  if (success) {\r\n                    history.push(\"/quakes\");\r\n                  }\r\n                }}\r\n                disabled={window.user.permissions.quakes !== 0}\r\n              >\r\n                Delete\r\n              </Button>\r\n            )}\r\n          </Grid>\r\n\r\n          <Grid item xs={12}>\r\n            <Typography variant=\"h6\">Raw data:</Typography>\r\n            <Typography style={{ marginTop: \"10px\" }} variant=\"body1\">\r\n              All y-axis represent strength in thousand counts per 10\r\n              milliseconds\r\n            </Typography>\r\n          </Grid>\r\n\r\n          {[\"EHZ\", \"ENE\", \"ENN\", \"ENZ\"].map((channel) => (\r\n            <Grid item xs={6}>\r\n              <Paper style={{ height: \"202px\" }}>\r\n                <Typography variant=\"h6\" style={{ marginLeft: \"40%\" }}>\r\n                  Channel {channel}\r\n                </Typography>\r\n                {quake && quake.data ? (\r\n                  <XYPlot width={sixMeasurements.width - 20} height={170}>\r\n                    <VerticalGridLines />\r\n                    <HorizontalGridLines />\r\n                    <XAxis title=\"Time (seconds)\" />\r\n                    <YAxis />\r\n                    <LineSeriesCanvas\r\n                      strokeWidth={1}\r\n                      data={quake.data[channel].map((y, time) => ({\r\n                        x: time / 100,\r\n                        y: y / 1000,\r\n                      }))}\r\n                    />\r\n                  </XYPlot>\r\n                ) : (\r\n                  <div width={sixMeasurements.width - 20} height={170} />\r\n                )}\r\n              </Paper>\r\n            </Grid>\r\n          ))}\r\n          <Grid item xs={6}>\r\n            <div ref={sixRef} />\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n    </Fade>\r\n  );\r\n}\r\n\r\nfunction QuakesList(props) {\r\n  const [page, setPage] = React.useState(0);\r\n  const [rows, setRows] = React.useState([]);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [totalRows, setTotalRows] = React.useState(1000);\r\n\r\n  const { setQuakes } = props;\r\n\r\n  let match = useRouteMatch();\r\n  const path = match.path;\r\n\r\n  console.log(\"render quakes list\");\r\n\r\n  const columns = [\r\n    { field: \"id\", headerName: \"#\", flex: 1 },\r\n    {\r\n      field: \"strength\",\r\n      headerName: \"Intensity (million EHZ counts per second)\",\r\n      flex: 3.5,\r\n      renderCell: (params) => Math.round(params.value / 100000) / 10,\r\n    },\r\n    {\r\n      field: \"date\",\r\n      headerName: \"Date\",\r\n      flex: 2.5,\r\n      renderCell: (params) => new Date(params.value).toDateString(),\r\n    },\r\n    {\r\n      field: \"timeStart\",\r\n      headerName: \"Start time\",\r\n      flex: 2,\r\n      renderCell: (params) => new Date(params.value).toLocaleTimeString(),\r\n    },\r\n    {\r\n      field: \"timeEnd\",\r\n      headerName: \"End time\",\r\n      flex: 2,\r\n      renderCell: (params) => new Date(params.value).toLocaleTimeString(),\r\n    },\r\n    {\r\n      field: \"view\",\r\n      headerName: \" \",\r\n      flex: 1,\r\n      renderCell: (params) => (\r\n        <Button component={Link} to={path + \"/\" + params.value.toString()}>\r\n          View\r\n        </Button>\r\n      ),\r\n    },\r\n  ];\r\n\r\n  const handlePageChange = (params) => {\r\n    setPage(params.page);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    async function getQuakes(page, per_page) {\r\n      const { success, json } = await callAPI(\"quakes\", \"GET\", {\r\n        page,\r\n        per_page,\r\n      });\r\n      if (success) {\r\n        setQuakes((prev) => {\r\n          var previousQuakes = JSON.parse(JSON.stringify(prev));\r\n          var quake;\r\n          for (quake of json.list) {\r\n            previousQuakes[quake.id] = quake;\r\n          }\r\n          console.log(\"quakes set\");\r\n          return previousQuakes;\r\n        });\r\n        setTotalRows(json.total);\r\n        return json.list;\r\n      }\r\n    }\r\n\r\n    let active = true;\r\n\r\n    (async () => {\r\n      setLoading(true);\r\n      const newRows = (await getQuakes(page + 1, 100)).map((row) => {\r\n        return { ...row, date: row.timeStart, view: row.id };\r\n      });\r\n\r\n      if (!active) {\r\n        return;\r\n      }\r\n\r\n      setRows(newRows);\r\n      setLoading(false);\r\n    })();\r\n\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [page, setQuakes]);\r\n\r\n  return (\r\n    <Fade in>\r\n      <Paper style={{ height: \"100%\", width: \"100%\" }}>\r\n        <DataGrid\r\n          rows={rows}\r\n          columns={columns}\r\n          pagination\r\n          pageSize={100}\r\n          rowCount={totalRows}\r\n          paginationMode=\"server\"\r\n          onPageChange={handlePageChange}\r\n          loading={loading}\r\n        />\r\n      </Paper>\r\n    </Fade>\r\n  );\r\n}\r\n\r\nexport default function Quakes(props) {\r\n  const [quakes, setQuakes] = React.useState({});\r\n  let match = useRouteMatch();\r\n  const path = match.path;\r\n\r\n  console.log(\"render quakes\");\r\n\r\n  React.useEffect(() => {\r\n    props.setActiveTab(1);\r\n    return;\r\n  }, [props]);\r\n\r\n  return (\r\n    <div style={{ height: \"90%\" }}>\r\n      <Switch>\r\n        <Route path={path + \"/:quakeID\"}>\r\n          <Quake quakes={quakes} />\r\n        </Route>\r\n        <Route path={path}>\r\n          <QuakesList setQuakes={setQuakes} />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n","import Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Fade from \"@material-ui/core/Fade\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { DataGrid } from \"@material-ui/data-grid\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport React from \"react\";\r\nimport callAPI from \"../utils/call-api\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawer: {\r\n    width: drawerWidth,\r\n    flexShrink: 0,\r\n  },\r\n  drawerPaper: {\r\n    width: drawerWidth,\r\n  },\r\n  drawerContainer: {\r\n    overflow: \"auto\",\r\n  },\r\n  content: {\r\n    // flexGrow: 1,\r\n    margin: -24,\r\n    height: \"100%\",\r\n  },\r\n  selected: {\r\n    backgroundColor: \"#FFFFFF\",\r\n    // color: \"#FFFFFF\"\r\n  },\r\n}));\r\n\r\nfunction CreateUser(props) {\r\n  const [email, setEmail] = React.useState(\"\");\r\n  const [permissions, setPermissions] = React.useState({\r\n    users: 2,\r\n    quakes: 1,\r\n    config: 1,\r\n    live: 1,\r\n  });\r\n\r\n  async function createUser() {\r\n    const { success, json } = await callAPI(\r\n      \"users\",\r\n      \"POST\",\r\n      { email, permissions: JSON.stringify(permissions) },\r\n      \"User created\"\r\n    );\r\n    if (success) {\r\n      props.setUsers((prev) => [...prev, json]);\r\n      props.setSelectedUser(json);\r\n    }\r\n  }\r\n  return (\r\n    <Paper\r\n      square\r\n      style={{\r\n        height: \"calc(100% - 24px)\",\r\n        paddingLeft: \"24px\",\r\n        paddingRight: \"24px\",\r\n        paddingTop: \"24px\",\r\n      }}\r\n    >\r\n      <div style={{ height: \"120px\" }}>\r\n        <Typography variant=\"h5\">Permissions:</Typography>\r\n\r\n        <Grid container spacing={2} style={{ marginTop: \"0px\" }}>\r\n          {[\r\n            [\"users\", \"Users: \"],\r\n            [\"quakes\", \"Past quakes: \"],\r\n            [\"live\", \"Live data: \"],\r\n            [\"config\", \"Config: \"],\r\n          ].map(([key, name]) => (\r\n            <Grid item xs={3}>\r\n              <Typography variant=\"body1\">{name}</Typography>\r\n              {permissions && (\r\n                <Select\r\n                  value={permissions[key]}\r\n                  onChange={(info, value) => {\r\n                    setPermissions((prev) => ({\r\n                      ...prev,\r\n                      [key]: value.props.value,\r\n                    }));\r\n                  }}\r\n                >\r\n                  {key !== \"quakes\" && <MenuItem value={2}>None</MenuItem>}\r\n                  <MenuItem value={1}>Read</MenuItem>\r\n                  <MenuItem value={0}>Write</MenuItem>\r\n                </Select>\r\n              )}\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      </div>\r\n      <div style={{ marginBottom: \"20px\" }}>\r\n        <Typography variant=\"h5\" style={{ marginBottom: \"10px\" }}>\r\n          Email:\r\n        </Typography>\r\n        <TextField\r\n          onChange={(event) => {\r\n            setEmail(event.target.value);\r\n          }}\r\n          label=\"New user email\"\r\n          variant=\"outlined\"\r\n        />\r\n      </div>\r\n      <Button\r\n        onClick={() => {\r\n          createUser();\r\n        }}\r\n        color=\"primary\"\r\n        variant=\"contained\"\r\n        startIcon={<AddIcon />}\r\n      >\r\n        Create\r\n      </Button>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nfunction User(props) {\r\n  const [user, setUser] = React.useState(props.user);\r\n  const [permissionsChange, setPermissionsChange] = React.useState(false);\r\n  const [permissions, setPermissions] = React.useState();\r\n\r\n  React.useEffect(() => {\r\n    setUser(props.user);\r\n    setPermissionsChange(false);\r\n    setPermissions(undefined);\r\n\r\n    async function getUser() {\r\n      const { success, json } = await callAPI(\r\n        \"users/\" + props.user.email,\r\n        \"GET\"\r\n      );\r\n      if (success) {\r\n        setUser(json);\r\n        setPermissions(json.permissions);\r\n      }\r\n    }\r\n\r\n    getUser();\r\n  }, [props.user]);\r\n\r\n  // Update permissions when changed\r\n  React.useEffect(() => {\r\n    if (permissionsChange) {\r\n      async function updatePermissions() {\r\n        const { success, json } = await callAPI(\r\n          \"users/\" + user.email + \"/permissions\",\r\n          \"PUT\",\r\n          { permissions: JSON.stringify(permissions) },\r\n          \"Permissions updated\"\r\n        );\r\n        if (success) {\r\n          setUser(json);\r\n          setPermissions(json.permissions);\r\n          setPermissionsChange(false);\r\n        }\r\n      }\r\n      updatePermissions();\r\n    }\r\n  }, [permissionsChange]);\r\n\r\n  const rows =\r\n    (user.logs &&\r\n      user.logs\r\n        .map((a, i) => ({ ...a, id: i }))\r\n        .sort((b, c) => c.timestamp - b.timestamp)) ||\r\n    [];\r\n  console.log(rows);\r\n  const columns = [\r\n    {\r\n      field: \"timestamp\",\r\n      headerName: \"Timestamp\",\r\n      flex: 8,\r\n      renderCell: (params) => new Date(params.value).toLocaleString(),\r\n    },\r\n    { field: \"endpoint\", headerName: \"Endpoint\", flex: 8 },\r\n    { field: \"method\", headerName: \"Method\", flex: 6 },\r\n    {\r\n      field: \"parameters\",\r\n      headerName: \"Parameters\",\r\n      flex: 7,\r\n      renderCell: (params) => JSON.stringify(params.value),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <Paper\r\n      square\r\n      style={{\r\n        height: \"calc(100% - 24px)\",\r\n        paddingLeft: \"24px\",\r\n        paddingRight: \"24px\",\r\n        paddingTop: \"24px\",\r\n      }}\r\n    >\r\n      <div style={{ height: \"120px\", marginTop: \"0px\" }}>\r\n        <Grid container spacing={2} style={{ marginTop: \"0px\" }}>\r\n          <Grid item xs={8} style={{ marginTop: \"0px\" }}>\r\n            <Typography variant=\"h5\">Permissions:</Typography>\r\n            <Grid container spacing={2} style={{ marginTop: \"0px\" }}>\r\n              {[\r\n                [\"users\", \"Users: \"],\r\n                [\"quakes\", \"Past quakes: \"],\r\n                [\"live\", \"Live data: \"],\r\n                [\"config\", \"Config: \"],\r\n              ].map(([key, name]) => (\r\n                <Grid item xs={3}>\r\n                  <Typography variant=\"body1\">{name}</Typography>\r\n                  {permissions && (\r\n                    <Select\r\n                      value={permissions[key]}\r\n                      onChange={(info, value) => {\r\n                        if (permissions[key] !== value.props.value) {\r\n                          setPermissions((prev) => ({\r\n                            ...prev,\r\n                            [key]: value.props.value,\r\n                          }));\r\n                          setPermissionsChange(true);\r\n                        }\r\n                      }}\r\n                    >\r\n                      {key !== \"quakes\" && <MenuItem value={2}>None</MenuItem>}\r\n                      <MenuItem value={1}>Read</MenuItem>\r\n                      <MenuItem value={0}>Write</MenuItem>\r\n                    </Select>\r\n                  )}\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs={4} style={{ marginTop: \"0px\" }}>\r\n            <Typography variant=\"h5\">Actions:</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              style={{ marginLeft: \"10px\", marginTop: \"5px\" }}\r\n              startIcon={<DeleteIcon />}\r\n              onClick={async () => {\r\n                const { success } = await callAPI(\r\n                  \"users/\" + user.email,\r\n                  \"DELETE\",\r\n                  {},\r\n                  \"User deleted\"\r\n                );\r\n                if (success) {\r\n                  props.setSelectedUser(\"new\");\r\n                  props.setUsers((prev) =>\r\n                    prev.filter((a) => a.email !== user.email)\r\n                  );\r\n                }\r\n              }}\r\n              disabled={window.user.permissions.users !== 0}\r\n            >\r\n              Delete\r\n            </Button>\r\n          </Grid>\r\n        </Grid>\r\n      </div>\r\n      <div style={{ height: \"calc(100% - 200px)\" }}>\r\n        <Typography variant=\"h5\" style={{ marginBottom: \"15px\" }}>\r\n          Logs:\r\n        </Typography>\r\n        <DataGrid rows={rows} columns={columns} loading={!user.logs} />\r\n      </div>\r\n    </Paper>\r\n  );\r\n}\r\n\r\nexport default function Users(props) {\r\n  console.log(\"render users\");\r\n\r\n  const classes = useStyles();\r\n  const [users, setUsers] = React.useState();\r\n  const [selectedUser, setSelectedUser] = React.useState(\"new\");\r\n\r\n  React.useEffect(() => {\r\n    props.setActiveTab(2);\r\n  }, [props]);\r\n\r\n  React.useEffect(() => {\r\n    async function getUser() {\r\n      const { success, json } = await callAPI(\"users\", \"GET\");\r\n      if (success) {\r\n        setUsers(json.list);\r\n      }\r\n    }\r\n    getUser();\r\n  }, []);\r\n\r\n  return (\r\n    <div className={classes.content}>\r\n      <Fade in style={{ height: \"100%\" }}>\r\n        <div style={{ height: \"100%\" }}>\r\n          <Grid container spacing={0} style={{ height: \"100%\" }}>\r\n            <Grid item xs={4}>\r\n              <List\r\n                component=\"nav\"\r\n                disablePadding\r\n                style={{\r\n                  height: \"100%\",\r\n                  backgroundColor: \"rgba(0, 0, 0, 0.08)\",\r\n                }}\r\n              >\r\n                {users &&\r\n                  users.map((user) => (\r\n                    <ListItem\r\n                      button\r\n                      style={{\r\n                        backgroundColor:\r\n                          selectedUser &&\r\n                          user.email === selectedUser.email &&\r\n                          \"#FFFFFF\",\r\n                        boxShadow:\r\n                          selectedUser &&\r\n                          user.email === selectedUser.email &&\r\n                          \"-4px 0px 5px -2px #888\",\r\n                      }}\r\n                      selected={\r\n                        selectedUser && user.email === selectedUser.email\r\n                      }\r\n                      onClick={() => setSelectedUser(user)}\r\n                    >\r\n                      <ListItemIcon>\r\n                        <Avatar src={user.picture} />\r\n                      </ListItemIcon>\r\n                      <ListItemText\r\n                        primary={user.name || user.email}\r\n                        secondary={\r\n                          user.name\r\n                            ? user.email\r\n                            : \"Awaiting first sign in to get details\"\r\n                        }\r\n                      />\r\n                    </ListItem>\r\n                  ))}\r\n                <ListItem\r\n                  button\r\n                  style={{\r\n                    backgroundColor: \"new\" === selectedUser && \"#FFFFFF\",\r\n                    boxShadow:\r\n                      selectedUser &&\r\n                      \"new\" === selectedUser &&\r\n                      \"-4px 0px 5px -2px #888\",\r\n                  }}\r\n                  selected={selectedUser === \"new\"}\r\n                  onClick={() => setSelectedUser(\"new\")}\r\n                >\r\n                  <ListItemIcon>\r\n                    <AddIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary=\"Create new user\" />\r\n                </ListItem>\r\n              </List>\r\n            </Grid>\r\n            <Grid item xs={8} style={{ height: \"100%\" }}>\r\n              {selectedUser === \"new\" ? (\r\n                <CreateUser\r\n                  setUsers={setUsers}\r\n                  setSelectedUser={setSelectedUser}\r\n                />\r\n              ) : (\r\n                users && (\r\n                  <User\r\n                    setUsers={setUsers}\r\n                    user={selectedUser}\r\n                    setSelectedUser={setSelectedUser}\r\n                  />\r\n                )\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Fade>\r\n    </div>\r\n  );\r\n}\r\n","import MuiAppBar from \"@material-ui/core/AppBar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Fade from \"@material-ui/core/Fade\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport PeopleIcon from \"@material-ui/icons/People\";\nimport PublicIcon from \"@material-ui/icons/Public\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport ShowChartIcon from \"@material-ui/icons/ShowChart\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport React from \"react\";\nimport { HashRouter as Router, Link, Route, Switch } from \"react-router-dom\";\nimport Config from \"./pages/config\";\nimport LiveData from \"./pages/live-data\";\nimport Clients from \"./pages/clients\";\nimport Quakes from \"./pages/quakes\";\nimport Users from \"./pages/users\";\nimport callAPI from \"./utils/call-api\";\nimport DevicesIcon from \"@material-ui/icons/Devices\";\n// import { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\n// import CssBaseline from '@material-ui/core/CssBaseline';\n\nconst drawerWidth = 240;\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // display: 'flex',\n    // height: window\n  },\n  contentRoot: {\n    display: \"flex\",\n    height: \"100%\",\n    // flexGrow: 3,\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  title: {\n    flexGrow: 1,\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: drawerWidth,\n  },\n  drawerContainer: {\n    overflow: \"auto\",\n  },\n  content: {\n    flexGrow: 3,\n    height: \"calc(100vh - 64px)\",\n    padding: theme.spacing(3),\n  },\n  popover: {\n    // background: theme.custom.palette.profilePopColor,\n    width: theme.spacing(40),\n    // borderRadius: theme.shape.borderRadius\n  },\n  container: {\n    display: \"flex\",\n    padding: theme.spacing(2),\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    width: theme.spacing(6),\n    height: theme.spacing(6),\n    margin: theme.spacing(1),\n    // background: theme.palette.background.default\n  },\n  userInfo: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    paddingLeft: theme.spacing(1),\n  },\n  userName: {\n    // ...theme.custom.fontFamily.metropolis,\n    fontSize: \"1rem\",\n    fontWeight: 500,\n  },\n  userEmail: {\n    // ...theme.custom.fontFamily.roboto,\n    fontSize: \"0.9rem\",\n  },\n  bar: {\n    padding: theme.spacing(2),\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  buttonSignout: {\n    // ...theme.custom.fontFamily.metropolis,\n    borderRadius: theme.spacing(0.5),\n    padding: theme.spacing(0.5, 2),\n    fontSize: \"0.8rem\",\n    fontWeight: 500,\n    textTransform: \"none\",\n  },\n}));\n\nfunction Admin(props) {\n  const classes = useStyles();\n  const [activeTab, setActiveTab] = React.useState(-1);\n  console.log(\"rerender\");\n  window.setActiveTab = setActiveTab;\n  window.activeTab = activeTab;\n\n  const user = props.user || {\n    permissions: { users: 3, quakes: 3, config: 3, live: 3 },\n  };\n\n  React.useEffect(() => {\n    return;\n  }, [props.user]);\n\n  return (\n    <Router>\n      <div className={classes.contentRoot}>\n        {/* <CssBaseline /> */}\n        {/* <AppBar position=\"fixed\" className={classes.appBar}>\n          <Toolbar>\n            <Typography variant=\"h6\" noWrap>\n              Clipped drawer\n          </Typography>\n          </Toolbar>\n        </AppBar> */}\n        <Drawer\n          className={classes.drawer}\n          variant=\"permanent\"\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n        >\n          <Toolbar />\n          <div className={classes.drawerContainer}>\n            <List>\n              <ListItem\n                component={Link}\n                to=\"/clients\"\n                selected={activeTab === 0}\n                button\n                disabled={user.permissions.users !== 0}\n                // disabled={Object.values(user.permissions).every(a => a === 3)}\n                key=\"Clients\"\n              >\n                <ListItemIcon>\n                  <DevicesIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Clients\" />\n              </ListItem>\n              <ListItem\n                component={Link}\n                to=\"/quakes\"\n                selected={activeTab === 1}\n                button\n                disabled={user.permissions.quakes > 1}\n                key=\"Past Quakes\"\n              >\n                <ListItemIcon>\n                  <PublicIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Past Quakes\" />\n              </ListItem>\n              <ListItem\n                component={Link}\n                to=\"/users\"\n                selected={activeTab === 2}\n                button\n                disabled={user.permissions.users > 1}\n                key=\"Users\"\n              >\n                <ListItemIcon>\n                  <PeopleIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Users\" />\n              </ListItem>\n              <ListItem\n                component={Link}\n                to=\"/live-data\"\n                selected={activeTab === 3}\n                button\n                disabled={user.permissions.live > 1}\n                key=\"Live Data\"\n              >\n                <ListItemIcon>\n                  <ShowChartIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Live Data\" />\n              </ListItem>\n              <ListItem\n                component={Link}\n                to=\"/config\"\n                selected={activeTab === 4}\n                button\n                disabled={user.permissions.config > 1}\n                key=\"Config\"\n              >\n                <ListItemIcon>\n                  <SettingsIcon />\n                </ListItemIcon>\n                <ListItemText primary=\"Config\" />\n              </ListItem>\n            </List>\n          </div>\n        </Drawer>\n        <main className={classes.content}>\n          <Toolbar />\n          <Switch>\n            <Route path=\"/live-data\">\n              {user.permissions.live < 2 && (\n                <LiveData setActiveTab={setActiveTab} />\n              )}\n            </Route>\n            <Route path=\"/quakes\">\n              {user.permissions.quakes < 2 && (\n                <Quakes setActiveTab={setActiveTab} />\n              )}\n            </Route>\n            <Route path=\"/config\">\n              {user.permissions.config < 2 && (\n                <Config setActiveTab={setActiveTab} />\n              )}\n            </Route>\n            <Route path=\"/users\">\n              {user.permissions.users < 2 && (\n                <Users setActiveTab={setActiveTab} />\n              )}\n            </Route>\n            <Route path=\"/clients\">\n              {user.permissions.users === 0 && (\n                <Clients setActiveTab={setActiveTab} />\n              )}\n            </Route>\n          </Switch>\n        </main>\n      </div>\n    </Router>\n  );\n}\n\nfunction AppBar(props) {\n  const classes = useStyles();\n  const user = props.user;\n\n  const [anchorEl, setAnchorEl] = React.useState(null);\n\n  function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  }\n\n  function handleClose() {\n    setAnchorEl(null);\n  }\n\n  function doLogout() {\n    delete localStorage.quakeUser;\n    window.location.reload();\n  }\n\n  async function onGoogleSignIn(gResponse) {\n    const response = await fetch(\n      `/api/v1/google-callback?token=${gResponse.credential}`,\n      { method: \"POST\" }\n    );\n    if (response.status === 200) {\n      const newUser = await response.json();\n      window.setUser(newUser);\n      window.makeAlert(\"Login succeeded\", \"success\");\n    } else {\n      window.makeAlert(\"Login error (1)\", \"error\");\n    }\n  }\n\n  window.onGoogleSignIn = onGoogleSignIn;\n\n  return (\n    <MuiAppBar position=\"fixed\" className={classes.appBar}>\n      <Toolbar>\n        <Typography variant=\"h6\" className={classes.title}>\n          Quake Admin\n        </Typography>\n        {user ? (\n          <Avatar\n            alt={user.name}\n            src={user.picture}\n            onClick={handleClick}\n            style={{ cursor: \"pointer\" }}\n          />\n        ) : (\n          <div>\n            <div\n              id=\"g_id_onload\"\n              data-client_id=\"292473907562-ocu3lmgkumnsqlhn2ahv79tos40ngd73.apps.googleusercontent.com\"\n              data-context=\"signin\"\n              data-ux_mode=\"popup\"\n              data-callback=\"onGoogleSignIn\"\n              data-auto_select=\"true\"\n              data-close_on_tap_outside=\"false\"\n            ></div>\n\n            <div\n              class=\"g_id_signin\"\n              data-type=\"standard\"\n              data-shape=\"rectangular\"\n              data-theme=\"outline\"\n              data-text=\"signin_with\"\n              data-size=\"large\"\n              data-logo_alignment=\"left\"\n            ></div>\n          </div>\n        )}\n\n        {user && (\n          <Popover\n            open={!!anchorEl}\n            anchorEl={anchorEl}\n            onClose={handleClose}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"right\",\n            }}\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"right\",\n            }}\n            classes={{\n              paper: classes.popover,\n            }}\n          >\n            <div className={classes.container}>\n              <Avatar\n                alt={user.name}\n                className={classes.avatar}\n                src={user.picture}\n              ></Avatar>\n              <div className={classes.userInfo}>\n                <Typography\n                  className={classes.userName}\n                  variant=\"h6\"\n                  component=\"span\"\n                  color=\"textPrimary\"\n                >\n                  {user.name}\n                </Typography>\n                <Typography\n                  className={classes.userEmail}\n                  variant=\"body1\"\n                  component=\"span\"\n                  color=\"textSecondary\"\n                >\n                  {user.email}\n                </Typography>\n              </div>\n            </div>\n            <Divider />\n            <div className={classes.bar}>\n              <Button\n                variant=\"outlined\"\n                size=\"small\"\n                onClick={doLogout}\n                classes={{ root: classes.buttonSignout }}\n              >\n                Sign out\n              </Button>\n              {/* <Button variant=\"outlined\" size=\"small\" onClick={refreshPermissions} classes={{ root: classes.buttonPermissions }}>Refresh permissions</Button> */}\n            </div>\n          </Popover>\n        )}\n      </Toolbar>\n    </MuiAppBar>\n  );\n}\n\nfunction App() {\n  const classes = useStyles();\n  const [user, setUser] = React.useState(() => {\n    if (localStorage.quakeUser) {\n      try {\n        var user = JSON.parse(localStorage.quakeUser);\n      } catch (exception) {\n        delete localStorage.quakeUser;\n        return undefined;\n      }\n\n      if (user.expiry < Date.now()) {\n        delete localStorage.quakeUser;\n        return undefined;\n      } else {\n        return user;\n      }\n    } else {\n      return undefined;\n    }\n  });\n\n  const [error, setError] = React.useState(\"\");\n  const [severity, setSeverity] = React.useState(\"\");\n  const [open, setOpen] = React.useState(false);\n\n  window.user = user;\n  window.setUser = setUser;\n\n  React.useEffect(() => {\n    localStorage.quakeUser = JSON.stringify(user);\n  }, [user]);\n\n  React.useEffect(() => {\n    async function refreshPermissions() {\n      var permissionsResponse = await callAPI(\"users/me\", \"GET\");\n      if (permissionsResponse.success) {\n        setUser((prev) => ({\n          ...prev,\n          permissions: permissionsResponse.json.permissions,\n        }));\n      }\n    }\n\n    if (user) {\n      refreshPermissions();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  function makeAlert(error, severity) {\n    setError(error);\n    setSeverity(severity);\n    setOpen(true);\n  }\n\n  window.makeAlert = makeAlert;\n\n  // const theme = createMuiTheme({\n  //   typography: {\n  //     fontFamily: 'museo-sans, sans-serif',\n  //   },\n  // });\n\n  return (\n    // <ThemeProvider theme={theme}>\n    //   <CssBaseline />\n    <Fade in>\n      <div className={classes.root}>\n        <AppBar user={user} />\n        <Admin user={user} />\n        <Snackbar\n          open={open}\n          autoHideDuration={5000}\n          onClose={() => {\n            setOpen(false);\n          }}\n        >\n          <Alert\n            severity={severity}\n            onClose={() => {\n              setOpen(false);\n            }}\n          >\n            {error}\n          </Alert>\n        </Snackbar>\n      </div>\n    </Fade>\n    // </ThemeProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}